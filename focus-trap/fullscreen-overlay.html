<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Focus Trap - Fullscreen Overlay example</title>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', () => {
            const focusableElements = Array.from(document
                .querySelectorAll('div[class=cookie-selection-controls] > input, div[class=cookie-button-container] > button'));

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    console.log(e);

                    const overlay = document.querySelector('div[id=modal-window]');

                    if (overlay && overlay.classList.contains('modal')) {
                        if (!focusableElements.includes(e.target)) {
                            e.preventDefault();

                            focusableElements[0].focus();
                        }

                        console.log('cookies active');
                    }
                }
            });
        });

        const toggleOverlay = (hide) => {
            const overlay = document.querySelector('div[id=modal-window]');

            if (hide === true) {
                overlay.setAttribute('aria-hidden', 'true');

                overlay.classList.remove('modal');
            } else {
                overlay.setAttribute('aria-hidden', 'false');

                overlay.classList.add('modal');
            }
        }
    </script>
    <style>
        .cookie-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.70);
            display: none;
        }

        .modal {
            display: flex;
            align-items: center;
        }

        .cookie-popup {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-content: center;
            border-radius: 10px;
            border: 1px solid black;
            padding: 1em;
            margin: auto;
            gap: 1em;
            max-width: 500px;
            background-color: #fff;
        }

        .cookie-selection-controls {
            display: grid;
            grid-template-columns: 2em auto;
            gap: 1em;
        }

        .cookie-button-container {
            display: flex;
            flex-direction: row;
            gap: 1em;
        }

        .form-grid {
            display: grid;
            grid-template-columns: auto auto;
            max-width: 600px;
            gap: 1em;
        }

        .form-submit {
            margin: 1em;
        }
    </style>
</head>
<body>
<main>
    <h1>Very cool website that needs cookies</h1>
    <p>
        Our quality content mainly consists of cats in various poses.
    </p>
    <a href="#">Here is a link that would get focused if the focus trap would not exist.</a>
    <p>
        Also dogs that sniff each other's butts are seen here.
    </p>
    <a href="#">Here is another link that would get focused if the focus trap would not exist.</a>
    <p>
        Have you ever watched a cockatoo solving a Rubik's cube? We neither.
    </p>
    <a href="#">Here is yet another link that would get focused if the focus trap would not exist.</a>

    <h2>
        Input form
    </h2>
    <p>
        Very important controls, but you need to confirm your cookie choice first.
    </p>

    <form>
        <div class="form-grid">
            <label for="name">Name: </label>
            <input id="name" type="text">
            <label for="surname">Surname:</label>
            <input id="surname" type="text">
            <label for="sex">Sex:</label>
            <select id="sex">
                <option>Yes</option>
                <option>No thanks</option>
            </select>
            <label for="email">E-Mail-Address:</label>
            <input id="email" type="email">
            <span>I am interested in:</span>
            <div>
                <input id="cats" type="checkbox">
                <label for="cats">Cats</label>
                <input id="dogs" type="checkbox">
                <label for="dogs">Dogs</label>
                <input id="cockatoos" type="checkbox">
                <label for="cockatoos">Cockatoos</label>
            </div>
        </div>

        <div class="form-submit">
            <input type="submit" value="Submit">
        </div>
    </form>

    <span>
        Click here to re-run:
    </span>
    <a href="#" onclick="toggleOverlay(false)">Show Cookie Banner</a>
</main>
<div id="modal-window" class="cookie-overlay modal">
    <div class="cookie-popup">
        <div class="cookie-info-container">
            <h2>Cookies üç™</h2>
            <p>
                Very important information regarding whom you will sell your soul to.
            </p>
            <p>
                Allow or Prohibit:
            </p>
            <div class="cookie-selection-controls">
                <input id="technical" type="checkbox" checked>
                <label for="technical">Technical Cookies</label>
                <input id="analytical" type="checkbox" checked>
                <label for="analytical">Analytical Cookies</label>
                <input id="thirdParty" type="checkbox" checked>
                <label for="thirdParty">3rd Party Cookies</label>
            </div>
        </div>
        <div class="cookie-button-container">
            <button onclick="toggleOverlay(true)">
                Accept
            </button>
            <button onclick="toggleOverlay(true)">
                Decline
            </button>
        </div>
    </div>
</div>
</body>
</html>